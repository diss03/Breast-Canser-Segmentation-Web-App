# Стандарты разработки проекта

## Оглавление

1. [Описание проекта](#Описание-проекта)
2. [Итерация 1](#Итерация-1)
3. [Итерация 2](#Итерация-2)
4. [Итерация 3](#Итерация-3)
5. [Итерация 4](#Итерация-4)
6. [Итерация 5](#Итерация-5)
7. [Итерация 6](#Итерация-6)
8. [Итерация 7](#Итерация-7)
9. [Правила работы с репозиторием](#Правила-работы-с-репозиторием)
    - [Ветки](#Ветки)
    - [Коммиты](#Коммиты)
    - [Pull Requests](#Pull-Requests)
    - [Версионирование (SemVer)](#Версионирование-SemVer)
    - [Пример процесса работы](#Пример-процесса-работы)
    - [Checklist перед push](#Checklist-перед-push)
    - [Запрещенные действия](#Запрещенные-действия)
10. [Дополнительно](#Дополнительно)

---

## Описание проекта

> **Цели проекта:**
> * Разработка информационной системы для генерации и обработки задач
> * Создание модульной архитектуры с разделением на компоненты
> * Обеспечение масштабируемости и поддерживаемости кода
>
> **Типы задач (области):**
> * `analysis` — Модели, обработка данных, алгоритмы
> * `backend` — API, сервер, БД
> * `frontend` — UI, компоненты, стили
> * `devops` — CI/CD, Docker, деплой
> * `deps` — Зависимости
> * `core` — Общая логика (остальное)

---

## Итерация 1

> ### План
> * Поставить цели и задачи ИС
> * Определить технологически стек
> * Начать создание макета UI
> * Сформировать архитектуру ИС
> * Развернуть ПАК
>
>
> ### Макет UI
> *[Макет будет добавлен после утверждения]*
>
> ### План на следующую итерацию
> * Утвердить финальный макет UI
> * Начать разработку нейронной сети
> * Начать работу над пайпланом обработки DICOM файлов
> * Изучить способы хранения DICOM файлов

---

## Итерация 2

> *[Заполняется по ходу разработки]*

---

## Итерация 3

> *[Заполняется по ходу разработки]*

---

## Итерация 4

> *[Заполняется по ходу разработки]*

---

## Итерация 5

> *[Заполняется по ходу разработки]*

---

## Итерация 6

> *[Заполняется по ходу разработки]*

---

## Итерация 7

> *[Заполняется по ходу разработки]*

---

## Правила работы с репозиторием

В проекте используется стратегия **Git Flow**. Все изменения проходят через Code Review в Pull Request (PR).

### Ветки

#### Формат
`<тип>/<область>-<описание>`

#### Постоянные ветки

| Ветка | Назначение | Защита                  |
| :--- | :--- |:------------------------|
| `main` | Стабильная версия, готовая к продакшену |  Запрещён прямой push   |
| `develop` | Основная ветка активной разработки |  Запрещён прямой push |

#### Временные ветки

| Тип ветки | Откуда создается | Куда мержится      | Формат имени                        |
|:----------|:-----------------|:-------------------|:------------------------------------|
| `feature` | `develop`        | `develop`          | `feature/<область>-<ID>-<описание>` |
| `fix`     | `develop`        | `develop`          | `fix/<область>-<ID>-<описание>`     |
| `release` | `develop`        | `main` + `develop` | `release/v<версия>`                 |
| `hotfix`  | `main`           | `main` + `develop` | `hotfix/v<версия>-<описание>`       |

#### Области (scope)

| Область    | Назначение                          |
|:-----------|:------------------------------------|
| `analysis` | Модели, обработка данных, алгоритмы |
| `backend`  | API, сервер, БД                     |
| `frontend` | UI, компоненты, стили               |
| `devops`   | CI/CD, Docker, деплой               |
| `docs`     | Документация проекта                |
| `deps`     | Зависимости                         |
| `core`     | Общая логика (остальное)            |

#### Примеры имен веток

```bash
# ✅ Правильно
feature/backend-PROJ-101-add-user-auth
fix/frontend-PROJ-102-fix-button-overflow
release/v1.2.0
hotfix/v1.2.1-critical-security-patch

# ❌ Неправильно
features/analysis-train-cnn-model      # Множественное число
bugfix/frontend-fix-upload-button      # Использовать fix вместо bugfix
hotfix/fix-memory-leak                 # Нет версии
my-branch                              # Нет структуры
```

---

### Коммиты

Стандарт: **Conventional Commits**

#### Формат

```
<тип>(<область>): <описание>
```

#### Типы коммитов

| Тип        | Назначение                              |
|:-----------|:----------------------------------------|
| `feat`     | Новая функциональность                  | 
| `fix`      | Исправление ошибки                      |
| `docs`     | Изменения в документации                |
| `style`    | Форматирование кода (пробелы, запятые)  |
| `refactor` | Рефакторинг кода (без новых фич и багов)|
| `test`     | Добавление или изменение тестов         |
| `chore`    | Обслуживание (зависимости, конфиги)     |

#### Области 

| Область    | Назначение                          |
|:-----------|:------------------------------------|
| `analysis` | Модели, обработка данных, алгоритмы |
| `backend`  | API, сервер, БД                     |
| `frontend` | UI, компоненты, стили               |
| `devops`   | CI/CD, Docker, деплой               |
| `dosc`     | Документация проекта                |
| `deps`     | Зависимости                         |
| `core`     | Общая логика (остальное)            |

#### Правила написания

1.  **Повелительное наклонение** (Imperative Mood): `add`, а не `added` или `adds`
2.  **Без точки** в конце описания
3.  **Нижний регистр** после типа (кроме собственных имён)
4.  **Краткость**: до 72 символов в первой строке

#### Примеры

```bash
# ✅ Правильно
docs(core): update README.md
feat(backend): add create_method _function
fix(frontend): resolve login button overflow
chore(deps): bump axios
refactor(analysis): optimize cnn inference

# ❌ Неправильно
Apdate README.md                          # Опечатка, нет типа
Add function create_method                # Нет типа и области
fix(backend): Fixed bug in login          # Прошедшее время
feat(core): add new feature.              # Точка в конце
```

---

### Pull Requests

#### Формат заголовка

```
<Тип>(<Область>): <Описание> (#ID-задачи, если используем Jira)
```

#### Примеры

```
feat(backend): implement user authentication (#PROJ-101)
fix(frontend): resolve button overflow on mobile
chore(devops): add docker-compose for local development
```

#### Требования к PR

1.  Заголовок соответствует стандарту Conventional Commits
2.  В описании PR указана ссылка на задачу (если есть)
3.  Минимум **1 аппрув** от ревьюера
4.  Все **CI/CD проверки** пройдены
5.  Ветка-источник **удаляется** после мержа

---

### Версионирование (SemVer)

#### Формат

```
v<major>.<minor>.<patch>
```

| Компонент | Описание | Пример |
| :--- | :--- | :--- |
| `major` | Несовместимые изменения API | v**2**.0.0 |
| `minor` | Новая функциональность (обратно совместимо) | v1.**1**.0 |
| `patch` | Исправление ошибок | v1.0.**1** |

#### Процесс релиза

1.  Создать ветку `release/v1.2.0` от `develop`
2.  Внести финальные правки
3.  Влить в `main` и поставить тег `v1.2.0`
4.  Влить обратно в `develop`

---

### Пример процесса работы

#### Создание новой функциональности

```bash
# 1. Создать ветку от develop
git checkout develop
git pull origin develop
git checkout -b feature/backend-PROJ-101-add-auth

# 2. Работа и коммиты
git add .
git commit -m "feat(backend): add login endpoint"
git commit -m "feat(backend): add password validation"

# 3. Отправить в репозиторий
git push origin feature/backend-PROJ-101-add-auth

# 4. Создать PR в develop (через GitHub/GitLab UI)
```

#### Исправление ошибки

```bash
git checkout develop
git checkout -b fix/frontend-PROJ-102-button-overflow
git commit -m "fix(frontend): resolve button overflow on mobile"
git push origin fix/frontend-PROJ-102-button-overflow
```

#### Горящее исправление (Hotfix)

```bash
# 1. Создать от main
git checkout main
git pull origin main
git checkout -b hotfix/v1.2.1-critical-bug

# 2. Исправить и закоммитить
git commit -m "fix(core): resolve memory leak in production"

# 3. Влить в main и develop
git checkout main
git merge hotfix/v1.2.1-critical-bug
git tag v1.2.1

git checkout develop
git merge hotfix/v1.2.1-critical-bug
```

#### Релиз

```bash
# 1. Создать релизную ветку
git checkout develop
git checkout -b release/v1.0.0

# 2. Финальные правки
git commit -m "chore(release): bump version to 1.0.0"
git commit -m "docs(core): update CHANGELOG.md"

# 3. Влить в main и develop
git checkout main
git merge release/v1.0.0
git tag v1.0.0

git checkout develop
git merge release/v1.0.0
```

---

### Checklist перед push

```bash
# 1. Проверить статус
git status

# 2. Посмотреть изменения
git diff

# 3. Убедиться, что в нужной ветке
git branch

# 4. Проверить последние коммиты
git log --oneline -5

# 5. Обновиться перед push
git pull origin develop

# 6. Запустить тесты
pytest tests/

# 7. Проверить код на соответствие стилю
flake8 .
black --check .

# 8. Убедиться, что нет секретов/паролей в коде
git secret reveal  # или аналогичная проверка

# 9. Сделать коммит
git commit -m "feat(backend): add user authentication"

# 10. Отправить изменения
git push origin feature/backend-PROJ-101-add-auth
```

---

### Дополнительно

1.  **Внутренняя документация:** В файлах создаются комментарии, поясняющие работу исполняемого кода (docstrings, JSDoc и т.д.)
2.  **Code Review:** Все PR проходят ревью минимум одним разработчиком
3.  **CI/CD:** Автоматические тесты и линтеры запускаются при каждом push
4.  **Branch Cleanup:** Ветки удаляются после мержа PR

---

> **Документ актуализирован:** *29.02.2026*  
> **Ответственный:** *Степаненко Денис*  
> **Статус:** *Утверждён*